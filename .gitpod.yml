# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - init: gp open README.md
  - name: Terminal 1
    init: npm i -g wasm-pack
    command: wasm-pack build
  - name: Terminal 2
    init: cd frontend && npm i --legacy-peer-deps
    before: cd ../pkg && npm link  
  - name: Terminal 3
    before: cd frontend && npm link --legacy-peer-deps
    command: npm run start
  - before: gp preview $(gp url 8080)/image-editor
#  The port will open at http://localhost:8080/image-editor
ports:
  - port: 8080
    onOpen : open-browser
    # url: https://8080-minorandmaj-imageeditor-h5crvjpb5v9.ws-us63.gitpod.io/image-editor
    visibility: private