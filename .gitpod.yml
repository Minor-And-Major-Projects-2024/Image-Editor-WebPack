# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  # - init: gp open README.md
  - name: npm
    init: npm i -g wasm-pack && cd frontend && npm i --legacy-peer-deps
  - name: build
    init: gp sync-await npm
    command: wasm-pack build
  - name: link
    init: gp sync-await build
    command: cd pkg && npm link
  - name: link2
    init: gp sync-await link
    command: cd frontend && npm link --legacy-peer-deps
  - name: compile
    init: gp sync-await link2
    command: cd frontend && npm run start 
  - name: browser
    init: gp sync-await compile
    command: gp preview $(gp url 8080)/image-editor

#  The port will open at http://localhost:8080/image-editor
ports:
  - port: 8080
    onOpen : open-browser
    # url: https://8080-minorandmaj-imageeditor-h5crvjpb5v9.ws-us63.gitpod.io/image-editor
    visibility: private