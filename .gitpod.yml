# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - init: gp open README.md
  - name: Terminal 1
    init: npm i -g wasm-pack
    command: wasm-pack build
    before: gp sync-done wasm-pack build
  - name: Terminal 2
    init: cd frontend && npm i --legacy-peer-deps
    command: cd frontend && npm i --legacy-peer-deps
  - name: Terminal 3
    before: gp sync-await wasm-pack build && cd pkg && npm link 
  - name: Terminal 4
    command: gp sync-await wasmc-pack build && cd frontend && npm link --legacy-peer-deps
  - name: Terminal 5
    command: gp sync-await npm i --legacy-peer-deps && npm run start
  - before: gp sync-await wasmc-pack build &&  gp preview $(gp url 8080)/image-editor
#  The port will open at http://localhost:8080/image-editor
ports:
  - port: 8080
    onOpen : open-browser
    # url: https://8080-minorandmaj-imageeditor-h5crvjpb5v9.ws-us63.gitpod.io/image-editor
    visibility: private